Integration Operation Segregation Principle with modern C++